<div class="block-wrapper">
  <%= link_to "< Назад", service_orders_worker_accounts_path, class: "button secondary-button mb-4" %>
  <h3> Замовлення № <%= @service_order.id %> </h3>
  <%= link_to "Сторінка послуги", service_path(@service_order.service), class: "button primary-button mb-4" %>
  <p> Було створено <%= @service_order.created_at.strftime("%F") %>
  <p> Замовник: <%= @service_order.user.full_name %> </p>
  <p> Контактні дані: <%= @service_order.contact_info %> </p>
  <p> Опис: <%= @service_order.description %> </p>
  <p> Статус: <%= service_order_status(@service_order.status) %> </p>
  <% if @service_order.cancellation_reason %>
    <p> Причина відміни: <%= @service_order.cancellation_reason %> </p>
    <p> Відмінив <%= @service_order.cancelled_by_user ? "замовник" : "виконавець" %>. </p>
  <% end %>
  <div class="flex gap-4 mt-4">
    <% if @service_order.worker.id == current_user.worker.id %>
      <% if @service_order.on_review? %>
        <%= button_to "Приступити до виконання", service_order_path(@service_order, service_order: { status: :in_progress }), method: :put, class: "button primary-button" %>
      <% elsif @service_order.in_progress? %>
        <%= button_to "Завершити", service_order_path(@service_order, service_order: { status: :finished }), method: :put, class: "button primary-button" %>
      <% end %>
    <% end %>
    <% unless @service_order.finished? || @service_order.cancelled? %>
      <%= link_to "Скасувати", cancellation_reason_page_service_order_path(@service_order), class: "button red-button" %>
    <% end %>
  </div>
</div>
